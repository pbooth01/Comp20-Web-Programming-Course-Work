<!DOCTYPE html>

<html>

<head>
	<title>Captain's Log</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>

$(document).keypress(function (e) {
  	if (e.which == 13) {
  		console.log("In keypress");
    	store(); 
  	}
	});
	
function Output()
	{
		var keyarray = [];
		var stringarray = [];
		elem = document.getElementById("log");
		output = "";
		for (key in localStorage) {
			keyarray.push(key);
			stringarray.push(localStorage[key]);
		}
		for(var i = keyarray.length - 1; i > -1; i--){
		output = output + "<p>" + keyarray[i] + " - " + stringarray[i] + "</p>\n";
		}
		elem.innerHTML = output;
	}
	
	function store()
	{
		txt = document.getElementById("msg").value;
		localStorage[new Date().getTime()] = txt;
		Output();
	}
	</script>
</head>

<body>
	<h1>Captain's Log</h1>
	<h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
	<div id="log"></div>
</body>
</html>